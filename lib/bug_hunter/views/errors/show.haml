-title "Error: #{@error.message}"

-content_for :header do
  the header

-content_for :body do
  =haml :"errors/_error_info"

  %div(data-role="collapsible" data-collapsed=true)
    %h3
      Backtrace
    -@error.backtrace.each do |line|
      -if line !~ /\/usr/
        %span.fk_key
          &=line
      -else
        &=line
      %br
  %div(data-role="collapsible" data-collapsed=true)
    %h3
      Environment
    %table
      -@error.request_env.each do |k,v|
        %tr
          -if k =~ /^HTTP_/
            %td.name_key
              &="#{k}"
            %td
              &=v
          -elsif k =~ /^SERVER_/
            %td.pk_key
              &="#{k}"
            %td
              &=v
          -elsif k =~ /^REQUEST_/
            %td.type_key
              &="#{k}"
            %td
              &=v
          -else
            %td
              &="#{k}"
            %td
              &="#{v}"

-content_for :footer do
  the footer
